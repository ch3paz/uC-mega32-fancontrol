Please see main.c for details.
